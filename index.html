<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yhteinen sanaristikko (pilvisynkka)</title>
  <style>
    :root { --cell: 34px; --gap: 2px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif; }
    body { margin:0; background:#f4f6fa; color:#0b1116; }
    .wrap { display:grid; grid-template-columns: 1fr 300px; gap:16px; align-items:start; width:min(98vw,1300px); margin:0 auto; padding:20px; }
    .left { }
    .right { position:sticky; top:12px; }

    h1 { font-size:22px; margin:0 0 6px 0; font-weight:700; }
    .subhint { font-size:14px; color:#334155; background:#e7eef9; border:1px solid #c9d9f8; padding:8px 10px; border-radius:10px; margin:6px 0 12px; }

    .status { font-size:12px; color:#475569; display:flex; align-items:center; gap:8px; margin-bottom:8px; }
    .dot { width:8px; height:8px; border-radius:50%; background:#94a3b8; }
    .dot.ok { background:#16a34a; }
    .dot.err { background:#ef4444; }

    .grid-wrapper { display:inline-block; background:#e5e7eb; padding:8px; border-radius:12px; border:1px solid #d1d5db; }
    .labels-row { display:grid; grid-template-columns: var(--cell) repeat(20, var(--cell)) var(--cell); }
    .label-cell { width:var(--cell); height:var(--cell); display:flex; align-items:center; justify-content:center; font-size:12px; color:#425466; }

    .grid-row { display:grid; grid-template-columns: var(--cell) repeat(20, var(--cell)) var(--cell); }
    .grid { display:grid; grid-template-columns: repeat(20, var(--cell)); gap:var(--gap); background:#d1d5db; padding:var(--gap); border-radius:8px; }

    .cell { width:var(--cell); height:var(--cell); display:grid; place-items:center; background:#ffffff; border-radius:6px; position:relative; border:1px solid #e5e7eb; }
    .cell input { width:100%; height:100%; text-align:center; font-weight:800; font-size:18px; text-transform:uppercase; background:transparent; border:none; color:#0b1116; outline:none; }
    .cell.black { background:#0f1720; border-color:#0f1720; }
    .cell.black input { visibility:hidden; pointer-events:none; }
    .cell.black::after { content:""; position:absolute; inset:0; border-radius:6px; background:repeating-linear-gradient(45deg, #0f1720 0 8px, #142237 8px 16px); opacity:.9; }
    .disabled-overlay { pointer-events:none; opacity:.55; filter:grayscale(0.2); }

    .toolbar { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:12px 0 0; }
    .toolbar button, .toolbar input[type="text"], .toolbar input[type="file"], .toolbar label { background:#ffffff; color:#0b1116; border:1px solid #cbd5e1; border-radius:10px; padding:8px 10px; }
    .toolbar button:hover { background:#f1f5f9; cursor:pointer; }
    .toolbar .grow { flex:1; }
    a.link { color:#0b6bcb; text-decoration:underline; }

    .card { background:#ffffff; border:1px solid #cbd5e1; border-radius:12px; padding:12px; box-shadow:0 2px 10px #00000010; }
    .names { display:grid; grid-template-columns: 1fr; gap:8px; }
    .names input, .names select { width:100%; padding:10px; border:1px solid #cbd5e1; border-radius:10px; }
    .toggle { display:flex; align-items:center; gap:8px; font-size:14px; }
    .muted { color:#64748b; font-size:12px; }

    @media (max-width: 980px){ .wrap{ grid-template-columns: 1fr; } .right{ position:static; } }
  </style>
</head>
<body>
<div class="wrap">
  <div class="left">
    <h1 id="title">Sanaristikko</h1>
    <div class="subhint">Klikkaa ruutua ja lisää kirjain. Ristikon huone on nettiosoitteen lopussa, Pekka lähettää linkin.</div>

    <div class="status"><span id="statusDot" class="dot"></span><span id="statusText">Offline-tila (paikallinen)</span><span id="activeInfo" class="muted"></span></div>

    <div id="gridWrapper" class="grid-wrapper"></div>

    <div class="toolbar" id="toolbar">
      <button id="save">Tallenna (.json)</button>
      <label>
        <input id="load" type="file" accept="application/json" style="display:none">
        <button id="loadBtn" type="button">Lataa (.json)</button>
      </label>
      <button id="clear">Tyhjennä ristikko (huone)</button>
      <span class="grow"></span>
      <input id="roomName" type="text" placeholder="Huoneen nimi (esim. POP1)" />
      <input id="roomTitle" type="text" placeholder="Huoneen otsikko (näkyy ylhäällä)" />
      <button id="makeLink">Luo linkki</button>
      <a id="roomLink" class="link" href="#" target="_blank" style="display:none">Avaa huone</a>
    </div>
  </div>

  <div class="right">
    <div class="card" style="margin-bottom:12px;">
      <div class="toggle"><input type="checkbox" id="lockBlack"> <label for="lockBlack">Lukitse mustat ruudut</label></div>
      <div class="muted" style="margin-top:6px;">Uudessa huoneessa mustat ovat lukossa oletuksena.</div>
    </div>
    <!-- oikea reuna jätetty lyhyeksi tässä esimerkissä -->
  </div>
</div>

<script type="module">
// ---- Ruudukon piirtäminen ----
const N = 20;
const gridWrapper = document.getElementById('gridWrapper');

function renderGrid(){
  gridWrapper.innerHTML='';
  // yläkirjaimet
  const top=document.createElement('div');
  top.className='labels-row';
  top.appendChild(document.createElement('div')).className='label-cell'; // tyhjä vasen
  for(let c=0;c<N;c++){ let l=document.createElement('div'); l.className='label-cell'; l.textContent=String.fromCharCode(65+c); top.appendChild(l);}
  top.appendChild(document.createElement('div')).className='label-cell'; // tyhjä oikea
  gridWrapper.appendChild(top);

  for(let r=0;r<N;r++){
    const row=document.createElement('div'); row.className='grid-row';
    const left=document.createElement('div'); left.className='label-cell'; left.textContent=r+1; row.appendChild(left);
    const grid=document.createElement('div'); grid.className='grid';
    for(let c=0;c<N;c++){ 
      const cell=document.createElement('div'); cell.className='cell'; 
      const inp=document.createElement('input'); inp.maxLength=1; 
      cell.appendChild(inp); grid.appendChild(cell);
    }
    row.appendChild(grid);
    const right=document.createElement('div'); right.className='label-cell'; right.textContent=r+1; row.appendChild(right);
    gridWrapper.appendChild(row);
  }

  const bottom=document.createElement('div'); bottom.className='labels-row';
  bottom.appendChild(document.createElement('div')).className='label-cell';
  for(let c=0;c<N;c++){ let l=document.createElement('div'); l.className='label-cell'; l.textContent=String.fromCharCode(65+c); bottom.appendChild(l);}
  bottom.appendChild(document.createElement('div')).className='label-cell';
  gridWrapper.appendChild(bottom);
}
renderGrid();
</script>
</body>
</html>
